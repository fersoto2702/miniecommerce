<app-admin-sidebar></app-admin-sidebar>

<div class="ml-72 p-6 min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 relative overflow-hidden">
  
<!-- Pok√©balls flotantes -->
  <div class="pokeball pokeball-1">
    <div class="pokeball-top"></div>
    <div class="pokeball-center"></div>
    <div class="pokeball-bottom"></div>
  </div>
  <div class="pokeball pokeball-2">
    <div class="pokeball-top"></div>
    <div class="pokeball-center"></div>
    <div class="pokeball-bottom"></div>
  </div>
  <div class="pokeball pokeball-3">
    <div class="pokeball-top"></div>
    <div class="pokeball-center"></div>
    <div class="pokeball-bottom"></div>
  </div>
  <div class="pokeball pokeball-4">
    <div class="pokeball-top"></div>
    <div class="pokeball-center"></div>
    <div class="pokeball-bottom"></div>
  </div>

  <div class="max-w-7xl mx-auto relative z-10">
    
    <!-- Header mejorado -->
    <div class="bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600 rounded-2xl shadow-xl p-6 mb-6 relative overflow-hidden backdrop-blur-sm">
      <div class="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-16 -mt-16"></div>
      <div class="absolute bottom-0 left-0 w-24 h-24 bg-white opacity-5 rounded-full -ml-12 -mb-12"></div>
      
      <div class="relative flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-black text-white drop-shadow-lg flex items-center gap-3">
            üë• Gesti√≥n de Usuarios
          </h1>
          <p class="text-white/90 text-sm mt-1 font-semibold">Administra los usuarios del sistema</p>
        </div>
        <div class="flex items-center gap-4">
          <div class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-xl border border-white/30">
            <p class="text-white/80 text-xs font-semibold">Total usuarios</p>
            <p class="text-white text-2xl font-black">{{ users.length }}</p>
          </div>
          <button class="bg-white hover:bg-blue-50 text-blue-600 font-bold px-6 py-3 rounded-xl shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-200 flex items-center gap-2">
            <span class="text-xl">‚ûï</span>
            <span>Nuevo Usuario</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Filtros y b√∫squeda con glassmorphism -->
    <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-xl shadow-lg p-4 mb-6 flex items-center gap-4 border border-purple-200/50 dark:border-purple-700/50">
      <div class="flex-1 relative">
        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl">üîç</span>
        <input 
          type="text" 
          placeholder="Buscar por nombre o email..."
          class="w-full pl-12 pr-4 py-3 bg-gray-50/50 dark:bg-gray-700/50 backdrop-blur-sm border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-4 focus:ring-purple-500/10 transition-all text-gray-900 dark:text-white font-medium">
      </div>
      <select class="px-4 py-3 bg-gray-50/50 dark:bg-gray-700/50 backdrop-blur-sm border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:outline-none focus:border-purple-500 transition-all text-gray-900 dark:text-white font-medium">
        <option value="">Todos los roles</option>
        <option value="admin">Admin</option>
        <option value="user">Usuario</option>
      </select>
    </div>

    <!-- Tabla mejorada con glassmorphism -->
    <div class="bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl overflow-hidden border-4 border-purple-400/50 dark:border-purple-600/50">
      
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600">
            <tr>
              <th class="py-4 px-6 text-left font-black text-white text-base tracking-wide">
                ID
              </th>
              <th class="py-4 px-6 text-left font-black text-white text-base tracking-wide">
                Usuario
              </th>
              <th class="py-4 px-6 text-left font-black text-white text-base tracking-wide">
                Email
              </th>
              <th class="py-4 px-6 text-left font-black text-white text-base tracking-wide">
                Rol
              </th>
              <th class="py-4 px-6 text-center font-black text-white text-base tracking-wide">
                Estado
              </th>
              <th class="py-4 px-6 text-center font-black text-white text-base tracking-wide">
                Acciones
              </th>
            </tr>
          </thead>

          <tbody class="divide-y-2 divide-purple-200 dark:divide-gray-700">
            <tr *ngFor="let u of users; let i = index" 
                class="hover:bg-purple-50 dark:hover:bg-gray-700 transition-all duration-200 group"
                [class.bg-purple-50]="i % 2 === 0"
                [class.dark:bg-gray-800]="i % 2 === 0"
                [class.bg-white]="i % 2 !== 0"
                [class.dark:bg-gray-850]="i % 2 !== 0">
              
              <!-- ID -->
              <td class="py-4 px-6 font-mono text-gray-600 dark:text-gray-400 font-bold">
                <span class="inline-flex items-center justify-center w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600 dark:text-purple-400 font-black">
                  {{ u.id }}
                </span>
              </td>
              
              <!-- Usuario -->
              <td class="py-4 px-6">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white font-black text-lg shadow-lg">
                    {{ u.name?.charAt(0).toUpperCase() || '?' }}
                  </div>
                  <div>
                    <p class="font-bold text-gray-900 dark:text-white text-base group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors">
                      {{ u.name }}
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                      Miembro desde 2024
                    </p>
                  </div>
                </div>
              </td>
              
              <!-- Email -->
              <td class="py-4 px-6">
                <div class="flex items-center gap-2">
                  <span class="text-lg">üìß</span>
                  <span class="text-gray-700 dark:text-gray-300 font-medium">
                    {{ u.email }}
                  </span>
                </div>
              </td>
              
              <!-- Rol -->
              <td class="py-4 px-6">
                <span 
                  class="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-bold text-sm shadow-md"
                  [class.bg-gradient-to-r]="true"
                  [class.from-red-500]="u.role === 'admin'"
                  [class.to-red-600]="u.role === 'admin'"
                  [class.from-blue-500]="u.role === 'user'"
                  [class.to-blue-600]="u.role === 'user'"
                  [class.text-white]="true">
                  <span *ngIf="u.role === 'admin'">üëë</span>
                  <span *ngIf="u.role === 'user'">üë§</span>
                  <span class="uppercase">{{ u.role }}</span>
                </span>
              </td>

              <!-- Estado -->
              <td class="py-4 px-6">
                <div class="flex justify-center">
                  <span class="inline-flex items-center gap-2 bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-xl font-bold text-sm shadow-md">
                    <span class="w-2 h-2 bg-white rounded-full animate-pulse"></span>
                    Activo
                  </span>
                </div>
              </td>

              <!-- Acciones -->
              <td class="py-4 px-6">
                <div class="flex items-center justify-center gap-2">
                  <button class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold p-3 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-110 group/btn">
                    <span class="text-lg group-hover/btn:scale-110 inline-block transition-transform">‚úèÔ∏è</span>
                  </button>
                  
                  <button class="bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white font-bold p-3 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-110 group/btn">
                    <span class="text-lg group-hover/btn:scale-110 inline-block transition-transform">üëÅÔ∏è</span>
                  </button>
                  
                  <button class="bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold p-3 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-110 group/btn">
                    <span class="text-lg group-hover/btn:scale-110 inline-block transition-transform">üóëÔ∏è</span>
                  </button>
                </div>
              </td>
            </tr>

            <!-- Estado vac√≠o -->
            <tr *ngIf="users.length === 0">
              <td colspan="6" class="py-16">
                <div class="flex flex-col items-center gap-4">
                  <div class="w-24 h-24 bg-gradient-to-br from-purple-100 to-blue-100 dark:from-purple-900/20 dark:to-blue-900/20 rounded-full flex items-center justify-center">
                    <span class="text-6xl">üë•</span>
                  </div>
                  <p class="text-gray-600 dark:text-gray-400 font-bold text-lg">
                    No hay usuarios registrados
                  </p>
                  <p class="text-gray-500 dark:text-gray-500 text-sm">
                    ¬°Comienza agregando tu primer usuario!
                  </p>
                  <button class="mt-2 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-bold px-8 py-3 rounded-xl transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:scale-105 flex items-center gap-2">
                    <span class="text-xl">‚ûï</span>
                    <span>Agregar primer usuario</span>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Footer con estad√≠sticas -->
      <div class="bg-gradient-to-r from-purple-100 via-blue-100 to-cyan-100 dark:from-gray-700 dark:to-gray-600 px-6 py-4 border-t-4 border-purple-400 dark:border-purple-600">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-2">
            <span class="text-2xl">üë•</span>
            <p class="text-sm text-gray-800 dark:text-gray-200 font-bold">
              Total de usuarios: 
              <span class="text-purple-600 dark:text-purple-400 font-black text-lg ml-1">
                {{ users.length }}
              </span>
            </p>
          </div>
          
          <div class="flex items-center gap-6">
            <div class="flex items-center gap-2">
              <span class="w-3 h-3 bg-red-500 rounded-full"></span>
              <span class="text-sm text-gray-700 dark:text-gray-300 font-semibold">
                Admins: <span class="font-black">{{ totalAdmins }}</span>
              </span>
            </div>
            <div class="flex items-center gap-2">
              <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
              <span class="text-sm text-gray-700 dark:text-gray-300 font-semibold">
                Usuarios: <span class="font-black">{{ totalUsers }}</span>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

</div>

<style>
.pokeball {
  position: absolute;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  animation: float-pokeball 15s infinite ease-in-out;
  opacity: 0.3;
  pointer-events: none;
}

.pokeball-top {
  position: absolute;
  width: 100%;
  height: 50%;
  background: #ff1a1a;
  border-radius: 60px 60px 0 0;
}

.pokeball-bottom {
  position: absolute;
  width: 100%;
  height: 50%;
  background: white;
  border-radius: 0 0 60px 60px;
  bottom: 0;
}

.pokeball-center {
  position: absolute;
  width: 100%;
  height: 8px;
  background: #1a1a1a;
  top: 50%;
  transform: translateY(-50%);
  z-index: 2;
}

.pokeball-center::after {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  background: white;
  border: 4px solid #1a1a1a;
  border-radius: 50%;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

.pokeball-1 {
  left: 10%;
  top: 20%;
  animation-delay: 0s;
}

.pokeball-2 {
  left: 70%;
  top: 15%;
  animation-delay: 3s;
}

.pokeball-3 {
  left: 30%;
  top: 60%;
  animation-delay: 6s;
}

.pokeball-4 {
  left: 85%;
  top: 70%;
  animation-delay: 9s;
}

@keyframes float-pokeball {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
    opacity: 0.3;
  }
  25% {
    transform: translateY(-100px) rotate(90deg);
    opacity: 0.5;
  }
  50% {
    transform: translateY(-200px) rotate(180deg);
    opacity: 0.3;
  }
  75% {
    transform: translateY(-100px) rotate(270deg);
    opacity: 0.5;
  }
}
</style>